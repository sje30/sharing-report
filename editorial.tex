\documentclass[11pt]{article}

\usepackage[colorlinks=true,linkcolor=black,citecolor=black,urlcolor=black]{hyperref}
\usepackage{amsmath,mathpazo,graphicx,doi}

\usepackage[a4paper,margin=3cm]{geometry}

\usepackage{xspace}
\usepackage{setspace}


\RequirePackage{lineno} 
\modulolinenumbers[2]

\usepackage[style=nature,articletitle=true,isbn=false,backend=bibtex]{biblatex}
\bibliography{editorial}
\AtEveryBibitem{\clearfield{month}}

\begin{document}

\onehalfspacing

\title{Towards standard practices for sharing computer code and programs in Neuroscience}

\author{Stephen J. Eglen$^{1,\dagger}$, Ben Marwick${^2}$, Yaroslav
  O. Halchenko${^3}$, Michael~Hanke${^{4,5}}$,
  \\
  Shoaib Sufi$^6$,
  Padraig Gleeson$^7$, R. Angus Silver$^7$,
  Andrew P. Davison$^8$,
  \\
  Linda Lanyon$^9$,
  Thomas Wachtler$^{10}$,
  David J. Willshaw$^{11}$,
  %%your names here,
  \\
  Jean-Baptiste Poline$^{99}$}
\date{\today}
\maketitle

\noindent $^{1}$ 
Cambridge Computational Biology Institute,
Department of Applied Mathematics and Theoretical Physics,
University of Cambridge, UK
%%Wilberforce Road, Cambridge CB3 0WA, UK

\noindent $^{2}$ 
Department of Anthropology,
University of Washington,
Seattle, WA 98195-3100 USA 

\noindent $^{3}$
Department of Psychological and Brain Sciences,
Dartmouth College,
Hanover, NH 03755 USA

\noindent $^{4}$
Institute of Psychology II, Otto-von-Guericke-University Magdeburg, 39106 Magdeburg, Germany

\noindent $^{5}$
Center for Behavioral Brain Sciences, 39106 Magdeburg, Germany

\noindent $^{6}$
Software Sustainability Insitute, University of Manchester, UK

\noindent $^{7}$
Department of Neuroscience, Physiology and Pharmacology, 
University College London, UK


\noindent $^{8}$
Unit\'{e} de Neurosciences, Information et Complexit\'{e}, CNRS, Gif sur Yvette, France


\noindent $^{9}$
International Neuroinformatics Coordinating Facility, 
Karolinska Institutet, Stockholm, Sweden

\noindent $^{10}$
Department of Biology II, Ludwig-Maximilians-Universit\"{a}t
M\"{u}nchen, Germany

\noindent $^{11}$
Institute for Adaptive and Neural Computation, 
School of Informatics, University of Edinburgh, UK


\noindent $^{99}$  Henry H. Wheeler, Jr. Brain Imaging Center, Helen Wills Neuroscience Institute, University of California, Berkeley, USA

\vspace*{2mm}
\noindent $\dagger$
Corresponding author.\\
\noindent Phone: +44 (0) 1223 765761
\noindent Email: S.J.Eglen@damtp.cam.ac.uk

\clearpage


\renewcommand{\cite}[1]{\autocite{#1}}

\linenumbers

\section*{Background}

Many areas of neuroscience are now critically dependent on
computational tools to help understand the large volumes of data being
created.  Furthermore, computer models are increasingly being used to
help predict and understand the function of the nervous system.  Many
of these computations are complex, and often cannot be concisely
reported in the methods section of a scientific article.  In a few
areas there is a short list of the software packages mostly used for
analysis (e.g., SPM, FSL, AFNI, BrainVoyager, FreeSurfer in
neuroimaging).  However, we often write new computer programs to solve
specific problems in the course of our research.  Some of these
programs may be relatively small scripts that help analyze all of our
data, and these rarely get described in papers.  As authors, how best
can we maximize the chances that other scientists can reproduce our
computations or reuse our methods on their data?  Is our research
reproducible \cite{web:naturefocus}?

To date, the sharing of computer programs underlying neuroscience
research has been the exception (see below for some examples), rather than the rule.  However, there
are many benefits to sharing these programs, including increased
understanding and reuse of your work.  Furthermore, open source programs can be scrutinized and improved, whereas the functioning of closed source
programs remain forever unclear \cite{Vihinen2015}.  Funding agencies, research institutes and publishers are all gradually developing policies to
reduce the withholding of computer programs relating to research
\cite{Morin2012-65e}.  The Nature family of journals have recently
published opinion pieces in favor of sharing whatever code is
available, in whatever form \cite{Barnes2010-iv,Ince2012-225}.  More
recently, since October 2014, all Nature journals require papers to
include a statement declaring \textit{whether} the programs underlying central
results in a paper are available. In April 2015 \textit{Nature Biotechnology} offered recommendations for providing code with papers and began asking referees to give feedback on their ability to test code that accompanies submitted manuscripts \cite{NatBiotech2015}.
In July 2015 F1000Research stated that ``Software papers describing non-open software, code and/or web tools will be rejected'' (\url{http://f1000research.com/channels/f1000-faculty-reviews/for-authors/article-guidelines/software-tool-articles}). Also in July, BioMed Central introduced a minimum standards of reporting checklist for BMC Neuroscience and several other journals, requiring subnmissions to include a code availability statement, and for code to be cited using a DOI or similar unique identifier \cite{Kenall2015}.

\subsection*{Current position}

To help the editors of \textit{Nature Neuroscience} and
\textit{Scientific Data} to evaluate if appropriate code is being
shared, we are now helping to run a one-year trial which adds a small
extra step to the manuscript review process.  During review, a
computational expert will be asked to check what code has been
provided, and to write a brief report commenting on its quality
according to criteria outlined below (``Simple steps to help you share
your code'').  There is no expectation that the expert will re-run the
programs, as often this can take days to recreate the computational
environment, and computations could take many months to complete.
Furthermore, this report will not prevent publication of a manuscript, as the current policy at Nature is not mandatory.
This effort corresponds to an assessment of code availability as suggested by
the Transparency and Openness Promotion (TOP) Guidelines \cite{Nosek2015}, and
extends the scope with concrete feedback on core aspects of long-term reusability.

\subsection*{What should be shared?}

It may not be obvious what to share, especially for complex projects
with many collaborators.  As advocated by Claerbout and Donoho, for
computational sciences the scholarship is not the article, the
"scholarship is the complete software [...]"
\cite{claerbout_electronic_1992,donoho_invitation_2010}.  So, ideally,
you should share as much code and data to allow others to reproduce
your work, but this may not be possible or practical.  However, it is
expected that you will share key parts of the work,
e.g. implementations of novel algorithms or analysis.  By getting into
the habit of sharing as much as possible, not only do you help others
who wish to reproduce your work, you will be helping other members of
your laboratory, or even yourself in the future.  By sharing your code
publicly, you are more likely to write higher-quality code
\cite{Easterbrook2014}, and you will know where to find it after
you've moved on from the project \cite{Halchenko2015}, rather than the
code disappearing on a colleague's laptop when they leave your group.
You will be part of a community and benefit from the code shared by
others, thus contributing to a reduction in software development time
for yourself and others.

\subsection*{Simple steps to help you share your code}

Once you have decided \textit{what} you plan to share, here are some simple 
guidelines for \textit{how} to share your work.  Ideally, these
principles should be followed throughout the lifetime of your project,
not just at the end when you wish to publish your results. Guidelines similar to these have been proposed recently in many areas of science \cite{Nosek2015, miguel2014, stodden2012journals}, suggesting that they are part of norms that are emerging across disciplines. In the `further reading' section below we list some specific proposals from other fields that expand on the guidelines we suggest here.  

\begin{description}
\item [Version control] Use a version control system (such as Git) to
  develop the code.  The version control database can then be easily
  and freely shared with others using sites such as
  \url{http://github.com} \cite{Ram2013} or
  \url{https://bitbucket.org}.  These sites allow you fine control
  over private versus public access to your code.  This means that you
  can keep your code repository private during its development, and
  then publicly share the repository at a later stage e.g. at the time
  of publication. It also makes it easy for others to contribute to your code, and to adapt it for their own uses. 

\item [Persistent URLs] Generate stable URLs (such as a DOI) for key
  versions of your software.  Unique identifiers are a key element in
  demonstrating the integrity and reproducibility of research
  \cite{vasilevsky2013reproducibility}. For code, these can be
  obtained freely and routinely with sites such as
  \url{http://zenodo.org} and \url{http://figshare.com}.  If your work
  includes computer models of neural systems, you may wish to consider
  depositing these models in established repositories such as
  ModelDB\cite{web:modeldb}, Open Source Brain\cite{web:osb}, INCF
  Software Center\cite{web:incf-software} or NITRC
  \cite{poline_software_2014}. Some of these sites allow for private
  sharing of repositories with anonymous peer reviewers. Journal
  articles that include a persistent URL to code deposited in a
  trusted repository meet the requirements of level two of the
  'analytic methods (code) transparency' standard of the TOP
  guidelines \cite{Nosek2015}.


\item [License] Choose a suitable license for your code to assert how
  you wish others to reuse your code  For example, to maximize reuse,
  you may wish to use a permissive license such as MIT or BSD
  \cite{Stodden2009}.  Licenses are also important to protect you from
  others misusing your code.  Visit \url{http://choosealicense.com/}
  to get a simple overview of which license to choose, or 
  \url{http://www.software.ac.uk/resources/guides/adopting-open-source-licence}
  for a detailed guide.

\item [Etiquette] When working with code written by others, observe
  Daniel Kahneman's 'reproducibility etiquette'\cite{Kahneman2014} and
  have a discussion with the authors of the code to give them a chance
  to fix bugs or respond to issues you have identified before you make
  any public statements.  Cite their code in an appropriate fashion.


\item [Documentation] Contrary to popular expectations, you do not
  need to write extensive documentation or a user's guide for the code
  still be to useful to others \cite{Barnes2010-iv}.  However, it is
  worth providing a minimal README file to give an introduction to
  what the code does, and how to run it.  For example, you should provide
  instructions on how to regenerate a key result, or a particular
  figure from a paper. Literate programming methods, where code and narrative text are interwoven in the same document, make documentation semi-automatic and can save a lot of time when preparing code to accompany a publication \cite{schulte2012multi, gentleman2012statistical}. In any cases, well documented code allows for easier re-use and checking.

\item [Tools and case studies] Consider using modern, widely used software tools that can help with making your computational research reproducible.  Many of
  these tools have already been used in Neuroscience and serve as good
  examples to follow, for example Org mode \cite{Delescluse2011},
  IPython/Jupyter \cite{Stevens2013} and Knitr \cite{Eglen2014}.  Other
  prominent examples of reproducible research in Computational
  Neuroscience include Vogels et al. \cite{Vogels2011-c8c} and Waskom et al. \cite{Waskom2014-gd}.
  Virtualization environments, such as VirtualBox appliances and
  Docker containers, can also be used to
  encapsulate or preserve all of the computational environment so that
  other users can run your code without having to install numerous dependencies \cite{Boettiger2015}.

\item [Include some tests] Testing the code has long been recognized
  as a critical step in software industry but the practice is not
  widely adopted yet by researchers. We recommend including test
  suites that demonstrate the code is producing the correct
  results\cite{Axelrod2014-xi}. These tests can be at a low level
  (testing each individual function, called unit testing) or at a
  higher level (e.g. testing that the program yields correct answers
  on simulated data) \cite{wilson_best_2014}.

\end{description}


\fbox{\begin{minipage}{1.0\linewidth}
\subsection*{Further reading (note to editor: please make this a box feature)}

Varsha Khodiyar 2015 Code Sharing - read our tips and share your own. Scientific Data Blog, February 19, 2015. \url{http://blogs.nature.com/scientificdata/2015/02/19/code-sharing-tips/}

Leveque, Randall 2013. Top Ten Reasons to Not Share Your Code (and why you should anyway). SIAM News, April 2013, \url{http://sinews.siam.org/DetailsPage/tabid/607/ArticleID/386/Top-Ten-Reasons-To-Not-Share-Your-Code-and-why-you-should-anyway.aspx}

Stodden, V. \& Miguez, S., 2014. Best Practices for Computational Science: Software Infrastructure and Environments for Reproducible and Extensible Research. Journal of Open Research Software. 2(1), p.e21. DOI: \url{http://doi.org/10.5334/jors.ay}

Stodden, V., Leisch, F., \& Peng R. (Eds.). (2014). Implementing Reproducible Research. CRC press, Chapman and Hall. 

Halchenko, Y. O. and Hanke, M. (2015). Four aspects to make science open ``by design'' and not as an after-thought. GigaScience, 4. DOI: \url{http://doi.org/10.1186/s13742-015-0072-7}
\end{minipage}}


\fbox{\begin{minipage}{1.0\linewidth}
\subsection*{Online communities discussing code sharing (note to editor: please make this a box feature)}

\begin{description}

\item [StackExchange and related projects] StackExchange is a network of free and highly active question-and-answer websites.  Two members of the network are relevant to questions of code sharing: \url{http://stackoverflow.com/} which is dedicated to questions about programming in any language in any context, and \url{http://academia.stackexchange.com/questions/tagged/reproducible-research} which is focused questions relating to reproducible research in academic context. A newer member of the StackExchange group is \url{http://area51.stackexchange.com/proposals/65426/open-science}. A related project is \url{https://neurostars.org/} which is a similar free public Q\&A website focused on Neuroinformatics questions, and with many questions on software packages, etc. 

\item [Scientists for Reproducible Research] This is an international multi-disciplinary email list that discusses a wide range of issues relating to code sharing: \url{https://groups.google.com/forum/\#!forum/reproducible-research}

\item [GitHub] GitHub is an online repository for computer code and programs that has a large community of researchers that develop and share their code openly on the site. GitHub is the largest and most active code sharing site (others include BitBucket and GitLab) and has convenient tools for facilitating efficient collaborative coding \cite{tippmann2014my}. If you are using an open source program you may find a community of users and developers active on GitHub, where you can ask questions and report problems.

\end{description}
\end{minipage}}


\subsection*{Closing remarks}

Changing the behaviors of Neuroscientists so that they make their code more available will likely be resisted by those who do not see the community benefits as outweighing the personal costs of the time and effort required to share code \cite{stodden2010scientific}. The community benefits, in our view, are obvious and substantial: we can demonstrate more robustly and transparently the reliability of our results, we can more easily adapt methods developed by others to our data, and the impact of our work increases as others can similarly reuse our methods on their data. Thus, we will endeavor to lead by example, and follow all these practices as part of our future work in all scientific publications. Even if the code we produce today will not run ten years from now, it will still be a more precise and complete expression of our analysis than the text of the methods section in our paper. 

However, exhortations such as this editorial are only a small part of
making code sharing a normal part of doing Neuroscience; many other
activities are important.  All researchers should be trained in sound
coding principles; such training is provided by organizations such as
Software Carpentry \cite{wilson_best_2014} and Neuroinformatics
nodes, e.g. \url{http://python.g-node.org}.  Furthermore we can
request code and data when reviewing, and submit to and review for
journals that support code sharing.  Grant proposals should be checked
for mentions of code availability, and we should encourage efforts
toward openness in hiring, promotion, and reference letters
\cite{leveque2012reproducible}. Funding agencies and publishers should
also consider mandating code sharing by default.  This combination of
efforts on a variety of fronts will increase the visibility of
research accompanied by open source code, and demonstrate to others in
the discipline that code sharing is a desirable activity that helps
move the field forward.

We believe that the sociological barriers to code sharing are harder to overcome than the technical ones. Currently, academic success is strongly linked to publications and there is little recognition for producing and sharing code. Code may also be seen as providing a private competitive advantage to researchers. We challenge this view and propose that code be regarded as part of the research products which should be shared by default, and that there should be an obligation to share code for those conducting publicly funded research. We are therefore advocating for code sharing as part of a broader culture change embracing transparency, reproducibility and re-usability of research products.   

\subsection*{Acknowledgments}

This article is based upon discussions from a workshop to encourage
sharing in neuroscience, held in Cambridge, December 2014.  It was
financially supported and organized by the International
Neuroinformatics Coordinating Facility (\url{http://www.incf.org}),
with additional support from the Software Sustainability institute
(\url{http://www.software.ac.uk}).


\printbibliography



\end{document}



%%% Local Variables:
%%% mode: latex
%%% TeX-PDF-mode: t
%%% TeX-master: t
%%% ispell-local-dictionary: "american"
%%% auto-fill-inhibit-regexp: ".*[&|].*[&|].*"
%%% End:
